## Project Waypoint: "Waypoint Archive" - Technology Stack Selection

**Date:** May 25, 2025
**Version:** 1.0

**Context:** This document outlines the selected technologies for the "Waypoint Archive" scripts of Project Waypoint. The primary goal of these scripts is the urgent and comprehensive archival of The Magic Cafe forum, involving web scraping, HTML parsing, and extensive file I/O. Performance, concurrency for I/O operations, and robustness are key considerations.

### Primary Technology Choice

| Category             | Technology                                       | Version/Details                                                                 | Description / Purpose                                                                                                | Justification                                                                                                         |
| :------------------- | :----------------------------------------------- | :------------------------------------------------------------------------------ | :------------------------------------------------------------------------------------------------------------------- | :-------------------------------------------------------------------------------------------------------------------- |
| **Language** | Go (Golang)                                      | Latest stable (e.g., 1.22.x or newer)                                           | Primary language for all archival scripts (indexing, HTML download, initial local structured data extraction).         | Chosen for its excellent concurrency model (goroutines) for I/O-bound tasks, strong performance, and static typing. |
| **HTTP Client** | `net/http` (Go Standard Library)                 | Included with Go                                                                | For making HTTP GET requests to fetch forum pages.                                                                   | Robust, performant, and readily available. Sufficient for the needs of this project.                                |
| **HTML Parsing** | 1. `golang.org/x/net/html` (Standard Library) \<br /\> 2. `PuerkitoBio/goquery` (Third-party) | 1. Included with Go \<br /\> 2. Latest stable                                      | 1. For basic, robust HTML tokenizing and parsing if direct DOM traversal is needed. \<br /\> 2. For jQuery-like CSS selector-based parsing, offering more convenience. | 1. No external dependencies. \<br /\> 2. Simplifies node selection for complex HTML structures.                         |
| **File I/O** | `os`, `io`, `path/filepath` (Go Standard Library) | Included with Go                                                                | For creating directories, reading, and writing files (raw HTML, structured JSON, index files, log files).             | Comprehensive and performant file system operations.                                                                    |
| **Concurrency** | Goroutines & Channels (Go built-in)              | Included with Go                                                                | To manage concurrent network requests, file operations, and potentially parallelize parts of data processing.        | Lightweight, efficient concurrency built into the language, ideal for high I/O throughput.                            |
| **Data Serialization** | `encoding/json` (Go Standard Library)            | Included with Go                                                                | For creating and reading structured JSON data files (e.g., for structured post content, progress files).             | Standard, efficient JSON handling.                                                                                    |

### Fallback Technology Choice

| Category             | Technology                                       | Version/Details                                       | Description / Purpose                                                                                           | Justification                                                                                                                    |
| :------------------- | :----------------------------------------------- | :---------------------------------------------------- | :-------------------------------------------------------------------------------------------------------------- | :------------------------------------------------------------------------------------------------------------------------------- |
| **Language** | Python                                           | Latest stable (e.g., 3.11.x or 3.12.x)                  | Fallback language if Go development proves too slow or problematic for the project timeline/user familiarity. | User's existing familiarity (PoC code), rapid development, extensive library support.                                            |
| **HTTP Client** | `requests` (synchronous) / `aiohttp` (asynchronous) | Latest stable                                         | For making HTTP GET requests. `aiohttp` preferred for I/O concurrency.                                          | `requests` is simple and well-known. `aiohttp` provides strong asynchronous capabilities within Python.                          |
| **HTML Parsing** | `BeautifulSoup4` (with `lxml` parser)            | Latest stable                                         | For parsing HTML content.                                                                                         | Very robust, forgiving parser, excellent for complex or malformed HTML. `lxml` provides speed.                                     |
| **File I/O** | Built-in `open()`, `os`, `pathlib`, `json` modules. `aiofiles` (for async) | Included with Python / Latest stable (`aiofiles`) | For file system operations and JSON handling. `aiofiles` for asynchronous file I/O with `asyncio`.                 | Python's standard library is comprehensive. `aiofiles` integrates well with `aiohttp`.                                      |
| **Concurrency** | `asyncio` / `multiprocessing`                    | Included with Python                                  | `asyncio` for I/O-bound concurrency. `multiprocessing` for CPU-bound tasks (e.g., intensive parsing of many files). | `asyncio` is suitable for I/O. `multiprocessing` needed to bypass GIL for true CPU parallelism if parsing becomes a bottleneck. |